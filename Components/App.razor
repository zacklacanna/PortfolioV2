@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Mvc.TagHelpers
<!DOCTYPE html>
<html lang="en">

@{
    var version = "1.8.0";
}


<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="/"/>
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css"/>
    <link rel="stylesheet" href="app.css?v=@version"/>
    <link rel="stylesheet" href="ZackV2.styles.css?v=@version"/>
    <link rel="icon" type="image/png" href="Zack-Logo.png" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <HeadOutlet/>
</head>

<body>
    <Routes @rendermode=RenderMode.InteractiveServer />
    <script src="https://kit.fontawesome.com/b235c568eb.js" crossorigin="anonymous"></script>
    <script src="_framework/blazor.web.js"></script>
    <script>
        // — smooth scroll + scroll-spy + wheel-forwarding —
        const main = document.querySelector('.main-content');
        const links = document.querySelectorAll('.nav-links a');
        const sections = Array.from(document.querySelectorAll('.main-content section[id]'));

        // smooth scroll & highlight
        links.forEach(a => {
            a.addEventListener('click', e => {
                e.preventDefault();
                document.querySelector(a.getAttribute('href'))
                    .scrollIntoView({ behavior: 'smooth', block: 'start' });
                links.forEach(x => x.classList.remove('active'));
                a.classList.add('active');
            });
        });

        // scroll-spy
        function onScroll() {
            const pos = main.scrollTop + 100;
            let cur = sections[0]?.id;
            sections.forEach(s => { if (s.offsetTop <= pos) cur = s.id; });
            links.forEach(a => {
                a.classList.toggle('active', a.getAttribute('href') === `#${cur}`);
            });
        }
        main.addEventListener('scroll', onScroll);
        window.addEventListener('load', onScroll);

        // forward wheel events from sidebar into main-content
        document.querySelector('.sidebar').addEventListener('wheel', e => {
            main.scrollBy({ top: e.deltaY });
            e.preventDefault();
        });
    </script>
</body>

</html>