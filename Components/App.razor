@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Mvc.TagHelpers
<!DOCTYPE html>
<html lang="en">

@{
    var version = "1.8.7";
}


<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="/"/>
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css"/>
    <link rel="stylesheet" href="app.css?v=@version"/>
    <link rel="stylesheet" href="ZackV2.styles.css?v=@version"/>
    <link rel="icon" type="image/png" href="Zack-Logo.png" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <HeadOutlet/>
</head>

<body>
    <Routes @rendermode=RenderMode.InteractiveServer />
    <script src="https://kit.fontawesome.com/b235c568eb.js" crossorigin="anonymous"></script>
    <script src="_framework/blazor.web.js"></script>
    <script>
        // 1) grab your topbar links
        const links = document.querySelectorAll('.topbar .nav-links a');

        // 2) and the sections they point to
        const sections = Array.from(document.querySelectorAll('section[id]'));

        // 3) smooth scroll + underline on click
        links.forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (!target) return;

                // smooth scroll the window
                window.scrollTo({
                    top: target.offsetTop,
                    behavior: 'smooth'
                });

                // highlight immediately
                links.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            });
        });

        // 4) scroll-spy: watch window scroll position
        function onScroll() {
            const scrollPos = window.scrollY + 100; // tweak offset as needed

            // find last section scrolled past
            let currentId = sections[0]?.id;
            sections.forEach(sec => {
                if (sec.offsetTop <= scrollPos) {
                    currentId = sec.id;
                }
            });

            // toggle .active (which triggers your underline CSS)
            links.forEach(link => {
                link.classList.toggle(
                    'active',
                    link.getAttribute('href') === `#${currentId}`
                );
            });
        }

        window.addEventListener('scroll', onScroll);
        window.addEventListener('load', onScroll);
    </script>
</body>

</html>